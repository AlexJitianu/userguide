<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task
  PUBLIC "-//OASIS//DTD DITA Task//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/task.dtd">
<task id="executing-sql-statements">
    <title>Executing SQL Statements</title>
    <prolog>
    <metadata>
      <keywords><indexterm>Relational Databases<indexterm>SQL execution support<indexterm>executing SQL
              statements</indexterm></indexterm></indexterm></keywords>
    </metadata>
  </prolog>
    <taskbody>
        <context>The steps for executing an SQL statement on a relational database are the
            following:</context>
        <steps>
            <step>
                <cmd>Configure a <xref href="../concepts/transformation-scenario.dita"
                        >transformation scenario</xref> from the <uicontrol>
                        <image href="../img/bt_transform_config.png"/> Configure Transformation
                        Scenario </uicontrol> button from the <uicontrol>Transformation</uicontrol>
                    toolbar.</cmd>
                <info>A SQL transformation scenario needs a database connection. You can configure a
                    connection from the <uicontrol>
                        <image href="../img/bt_options_shortcut.png"/> Preferences </uicontrol>
                    button from the scenario dialog.</info>
                <stepresult>The dialog that appears contains the list of existing scenarios that
                    apply to SQL documents.</stepresult>
            </step>
            <step>
                <cmd>Set parameter values for SQL placeholders from the
                        <uicontrol>Parameters</uicontrol> button from the scenario dialog.</cmd>
                <stepxmp>For example in <codeph>SELECT * FROM `test`.`department` where DEPT = ? or
                        DEPTNAME = ?</codeph> two parameters can be configured for the place holders
                    (?) in the transformation scenario.</stepxmp>
                <info>When the SQL statement will be executed, the first placeholder will be
                    replaced with the value set for the first parameter in the scenario, the second
                    placeholder will be replaced by the second parameter value and so on.<note
                        type="restriction">When a stored procedure is called in an SQL statement
                        executed on an SQL Server database mixing in-line parameter values with
                        values specified using the <uicontrol>Parameters</uicontrol> button of the
                        scenario dialog is not recommended. It is due to a limitation of the SQL
                        Server driver for Java applications. An example of stored procedure call
                        that is not recommended is: <codeph>call dbo.Test(22,
                    ?)</codeph>.</note></info>
            </step>
            <step>
                <cmd>Execute the SQL scenario from the <uicontrol>Transform now</uicontrol> button
                    of the scenario dialog.</cmd>
                <stepresult>
                    <p>The result of a SQL transformation will be <xref
              href="../topics/results-view.dita#results-view" format="dita">displayed in a
              view</xref> at the bottom of the <ph
              keyref="product"/> window.</p>
                </stepresult>
            </step>
            <step>
                <cmd>View more complex return values of the SQL transformation in a separate editor
                    panel.</cmd>
                <info>A more complex value returned by the SQL query (for example an XMLTYPE value
                    or a CLOB one) cannot be displayed entirely in the result table.</info>
                <substeps>
                    <substep>
                        <cmd>Right click on the cell containing the complex value.</cmd>
                    </substep>
                    <substep>
                        <cmd>Select the action <uicontrol>Copy cell</uicontrol> from the popup
                            menu.</cmd>
                        <stepresult>The action will copy the value in the clipboard.</stepresult>
                    </substep>
                    <substep>
                        <cmd>Paste the value where you need it.</cmd>
                        <stepxmp>For example you can paste the value in an opened XQuery editor
                            panel of <ph
                                    keyref="product"/>.
                        </stepxmp>
                    </substep>
                </substeps>
            </step>
        </steps>
    </taskbody>
</task>
