<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE task
  PUBLIC "-//OASIS//DTD DITA Task//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/task.dtd">
<task id="floating-license-servlet-setup">
    <title>Setting up a Floating License Server Running as a Java Servlet</title>
    <shortdesc>Setting up the floating license servlet.
    </shortdesc>
  <prolog>
    <metadata>
      <keywords><indexterm>License<indexterm>floating
                    license servlet</indexterm></indexterm></keywords>
    </metadata>
  </prolog>
    <taskbody>
    <context>
      <fig id="fig_thh_hlz_x4">
        <title>Floating License Server Running as a Servlet</title>
        <image href="../img/diag_FloatingLicenseServer.png" id="image_i3h_hlz_x4"/>
      </fig>
    </context>
        <steps>
      <step>
        <cmd>Make sure that Apache Tomcat 5.5 or higher is running on the machine you have selected
          to be the license server. To get it, go to <xref href="http://tomcat.apache.org"
            format="org" scope="external">http://tomcat.apache.org</xref>.</cmd>
      </step>
            <step>
                <cmd>Download the <uicontrol>Web ARchive</uicontrol> (<b>.war</b>) license servlet
          from one of the download URLs included in the registration email message. </cmd>
            </step>
            <step>
                <cmd>Go to the Tomcat Web Application Manager page. In the <uicontrol>WAR file to
            deploy</uicontrol> section choose the WAR file and click the
            <uicontrol>Deploy</uicontrol> button. The <term>oXygen License Servlet</term> is now up
          and running, but there are no license keys registered yet.</cmd>
            </step>
            <step>
                <cmd>To register a license key, log on the license server machine and go to the
          Tomcat installation folder (usually <filepath>/usr/local/tomcat</filepath>). Then go to
          the <filepath>webapps/oXygenLicenseServlet/WEB-INF/license/</filepath> folder and create a
          new file called <filepath>license.txt</filepath>. Copy the license text into this file and
          save it.</cmd>
            </step>
            <step>
                <cmd>We recommend that you password protect
          <?oxy_comment_start author="Mark" timestamp="20140730T165918-0400" comment="It is not clear what &quot;your pages&quot; mean in this step. All you have set up so far are licenses, not pages. "?>your
          pages<?oxy_comment_end?> using a Tomcat Realm. Please refer to the <xref
            href="http://tomcat.apache.org/tomcat-7.0-doc/config/realm.html" format="html"
            scope="external">Tomcat Documentation</xref> for more information.</cmd>
            </step>
            <step>
                <cmd>Once you have defined a Realm resource, edit
            <filepath>webapps/oXygenLicenseServlet/WEB-INF/web.xml</filepath> file to configure user
          access rights on the license server. Note that Tomcat's standard security roles are used,
          i.e.: <b>standard</b> for licensing and <b>admin</b> or <b>manager</b> for the license
          usage report page.</cmd>
            </step>
            <step>
                <cmd>By default, the license server logs its activity in
            <filepath>/usr/local/tomcat/logs/oxygenLicenseServlet.log</filepath> file. To change the
          log file location, edit the <codeph>log4j.appender.R2.File</codeph> property from the
            <filepath>/usr/local/tomcat/webapps/oXygenLicenseServlet/WEB-INF/lib/log4j.properties</filepath>
          configuration file.</cmd>
            </step>
            <step>
                <cmd>Restart <term>oXygen License Servlet</term> from the Tomcat Web Application
                    Manager page.</cmd>
            </step>
        </steps>
    </taskbody>
</task>
