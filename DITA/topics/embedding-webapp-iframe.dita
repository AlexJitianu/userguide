<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="topic_y12_cgb_n5">
  <title>Embedding oXygen XML WebApp in an CMS page</title>
  <body>
    <p>oXygen XML WebApp can be embedded in the CMS to offer editing functionality for documents
      stored in the CMS.</p>
    <p>In order to embed oXygen XML WebApp, one should load the main page,
        <filepath>app/oxygen.html</filepath> in an <codeph>iframe</codeph>. </p>
    <section id="section_dvp_vgb_n5">
      <title>Security restrictions</title>
      <p>oXygen XML WebApp uses cookies to enforce its licensing and to maintain the editing state
        of the opened documents. Some browsers block <ph>thrid-party cookies</ph> for security
        reasones. In order to avoid having the cookies blocked, WebApp should be served from the
        same origin as the CMS host page.</p>
      <title>Passing parameters to the editor</title>
      <p>In order to control the editor one can use URL parameters described in the
          <?oxy_comment_start author="Cristian Talau" timestamp="20151231T125123+0200" comment="We should make this web-link a conref."?><xref
          href="https://www.oxygenxml.com/doc/versions/17.1/ug-editor/#topics/customizing_js.html"
          format="html">options section</xref><?oxy_comment_end?>. In order to pass custom
        parameters one can implement a
          <?oxy_comment_start author="Cristian Talau" timestamp="20151231T133126+0200" comment="We should make this web-link a conref."?><xref
          href="https://www.oxygenxml.com/doc/versions/17.1/ug-editor/#topics/customizing_plugins.html"
          >plugin for oXygen XML WebApp</xref><?oxy_comment_end?> that contains JavaScript code to
        interpret those parameters.</p>
    </section>
    <section id="section_mbf_chb_n5">
      <title>Communicating with the editor</title>
      <p>In order to communicate with the editor, one can send messages between the host CMS page
        and the WebApp page. </p>
      <p>Browsers offer the <codeph>window.postMessage</codeph> JavaScript API that allow sending
        messages between different pages. In order to receive the message, one has to create<?oxy_comment_start author="Cristian Talau" timestamp="20151231T133133+0200" comment="We should make this web-link a conref."?>
        <xref
          href="https://www.oxygenxml.com/doc/versions/17.1/ug-editor/#topics/customizing_plugins.html"
          >plugin for oXygen XML WebApp</xref><?oxy_comment_end?> that contains JavaScript code that
        listens for the messages sent by the CMS host page and use the WebApp's
          <?oxy_comment_start author="Cristian Talau" timestamp="20151231T133144+0200" comment="We should make this web-link a conref."?><xref
          href="https://www.oxygenxml.com/doc/versions/17.1/ug-editor/#topics/customizing_js.html"
          format="html">JavaScript API</xref>
        <?oxy_comment_end?>to implement the required functionality.</p>
    </section>
    <section id="section_wnm_xhb_n5">
      <title>Other problems</title>
      <ul id="ul_uxv_yhb_n5">
        <li>We experienced problems if the iframe is hidden while loading using <codeph>display:
            none</codeph>. One can use <codeph>visibility: hidden</codeph> for the same
          purpose.</li>
        <li>Some XML vocabularies, e.g. DITA, support cross-document links. By default, clicking on
          cross-document links will open that document in the oXygen XML WebApp in another browser
          tab. If the editor is embedded you may want to change this behavior using the
            <codeph>sync.api.Editor.EventTypes.LINK_OPENED</codeph> event that is triggered on the
            <xref
            href="https://www.oxygenxml.com/maven/com/oxygenxml/oxygen-webapp/17.1.0.1/jsdoc/sync.api.Editor.html"
              ><codeph>sync.api.Editor</codeph></xref> instance.</li>
      </ul>
    </section>
  </body>
</topic>
