<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "http://docs.oasis-open.org/dita/v1.1/OS/dtd/topic.dtd">
<topic id="builtin-xsl-fo-processor">
  <title>The Built-in XSL-FO Processor</title>
  <prolog>
    <metadata>
      <keywords><indexterm>Transforming Documents<indexterm>XSL-FO processors</indexterm></indexterm></keywords>
    </metadata>
  </prolog>
  <body>
    <p>The <ph keyref="product"/> installation
      package is distributed with the <xref href="http://xml.apache.org/fop/index.html"
        scope="external" format="html">Apache FOP</xref> that is a Formatting Objects processor for
      rendering your XML documents to PDF. <i>FOP</i> is a print and output independent formatter
      driven by XSL Formatting Objects. <i>FOP</i> is implemented as a Java application that reads a
      formatting object tree and renders the resulting pages to a specified output.</p>
    <p>To include PNG images in the final PDF document you need the <xref
        href="http://java.sun.com/products/jimi/" scope="external" format="html"><i>JIMI</i></xref>
      or <xref href="http://java.sun.com/products/java-media/jai/" scope="external" format="html"
          ><i>JAI</i></xref> libraries. For PDF images you need the <xref
        href="http://www.jeremias-maerki.ch/download/fop/pdf-images/" scope="external" format="html"
          ><codeph>fop-pdf-images</codeph></xref> library. These libraries are not bundled with <ph
        keyref="product"/> but using them is very easy. You need to download them and <xref
        href="preferences-fo-processors.dita">create an external FO processor</xref> based on the
      built-in FOP libraries and the extension library. The <xref
        href="preferences-fo-processors.dita">external FO processor created in
          <uicontrol>Preferences</uicontrol></xref> will have a command line like:</p>
    <codeblock>java -cp "${oxygenInstallDir}/lib/xercesImpl.jar:
${oxygenInstallDir}/lib/fop.jar:${oxygenInstallDir}/lib/
avalon-framework-4.2.0.jar:
${oxygenInstallDir}/lib/batik-all-1.7.jar:${oxygenInstallDir}/lib/
commons-io-1.3.1.jar:
${oxygenInstallDir}/lib/xmlgraphics-commons-1.3.1.jar:
${oxygenInstallDir}/lib/commons-logging-1.0.4.jar:
${oxygenInstallDir}/lib/saxon9ee.jar:${oxygenInstallDir}/lib/
saxon9-dom.jar:
${oxygenInstallDir}/lib/xalan.jar:${oxygenInstallDir}/lib/
serializer.jar:
${oxygenInstallDir}/lib/resolver.jar:${oxygenInstallDir}/lib/
fop-pdf-images-1.3.jar:
${oxygenInstallDir}/lib/PDFBox-0.7.3.jar" 
org.apache.fop.cli.Main -fo ${fo} -${method} ${out}</codeblock>
    <p>You need to add to the classpath <filepath>JimiProClasses.zip</filepath> for <i>JIMI</i> and
        <filepath>jai_core.jar</filepath>, <filepath>jai_codec.jar</filepath> and
        <filepath>mlibwrapper_jai.jar</filepath> for <i>JAI</i>. For the <i>JAI</i> package you can
      include the directory containing the native libraries (<filepath>mlib_jai.dll</filepath> and
        <filepath>mlib_jai_mmx.dll</filepath> on Windows) in the <i>PATH</i> system variable.</p>
    <p>The Mac OS X version of the <i>JAI</i> library can be downloaded from <xref
        href="http://www.apple.com/downloads/macosx/apple/java3dandjavaadvancedimagingupdate.html"
        scope="external" format="html"/>. In order to use it, install the downloaded package.</p>
    <p>Other FO processors can be configured in <xref href="preferences-fo-processors.dita">the
          <uicontrol>Preferences</uicontrol> dialog</xref>.</p>
  </body>
</topic>