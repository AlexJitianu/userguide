<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="eppo.dita.pathfinder-keys">
  <title>Pathfinder: Keys</title>
  <body>
    <p>DITA uses keys to insert content that may have different values in different circumstances.
      Keys provide a way to refer to something indirectly. This can make it easier to manage and to
      reuse content in a number of ways.</p>
    <section>
      <title>Keys for values</title>
      <p>You can use keys to represent value that may vary in different outputs. For instance, you
        may have several products that share a common feature. When you want to describe that
        feature, you need a way to insert the name of the product, even though that name will be
        different, depending on which product the feature description is being used for. For
        example, you might have a sentence like this:</p>
      <codeblock>The quick-heat feature allows [product-name] to come up to temperature quickly.</codeblock>
      <p>You need a way to substitute the correct product name for each product. </p>
      <p>One way to do this would be to provide conditional values using the product
          <codeph>profiling</codeph> attribute:<fig id="fig.variable-content-using-profiling">
          <title>Variable content using profiling</title>
          <codeblock>&lt;p>The quick-heat feature allows 
    &lt;ph product="basic">Basic Widget&lt;/ph>
    &lt;ph product="pro">Pro Widget&lt;/ph>
    &lt;ph product="enterprise">Enterprise Widget&lt;/ph>
to come up to temperature quickly.&lt;/p></codeblock>
        </fig></p>
      <p>But this approach means that you are repeating the product names over and over again
        everywhere the product name is mentioned. This is time consuming for authors and will create
        a maintenance problem if the product names change. </p>
      <p>The alternative is to use a key reference:</p>
      <fig id="fig.variable-content-using-key-ref">
        <title>Variable content using a key reference</title>
        <codeblock>&lt;p>The quick-heat feature allows &lt;ph keyref="product"/> to come up to temperature quickly.&lt;/p></codeblock>
      </fig>
      <p>The key reference stands in for the name of the product. When the content is published, the
        current value of the key <codeph>product</codeph> will be inserted. </p>
      <section>
        <title>Inserting a key reference</title>
        <p>To insert a key reference into a document in <ph keyref="product"/> author mode, <ol
            id="ol_vzt_ljd_zp">
            <li>Hit <uicontrol>Enter</uicontrol> and select any DITA element that supports the
                <codeph>keyref</codeph> attribute. </li>
            <li>Hit <uicontrol>Alt+Enter</uicontrol> to bring up the attribute editor</li>
            <li>In the <uicontrol>Name</uicontrol> field, select <codeph>keyref</codeph>.</li>
            <li>In the <codeph>Value</codeph> field, select or enter the name of the key. </li>
          </ol></p>
      </section>
      <section>
        <title>Defining a key</title>
        <p>In DITA, keys are define in maps, never in topics. A ditamap that defines various values
          of the product key would look something like
          this:<codeblock>&lt;?xml version="1.0" encoding="UTF-8"?>
&lt;!DOCTYPE map PUBLIC "-//OASIS//DTD DITA Map//EN" "map.dtd">
&lt;map>
  &lt;!-- product name -->
  &lt;keydef keys="product" product="basic">
    &lt;topicmeta>
      &lt;keywords>
        &lt;keyword>Basic Widget&lt;/keyword>
      &lt;/keywords>
    &lt;/topicmeta>
  &lt;/keydef>
  &lt;keydef keys="product" product="pro">
    &lt;topicmeta>
      &lt;keywords>
        &lt;keyword>Professional Widget&lt;/keyword>
      &lt;/keywords>
    &lt;/topicmeta>
  &lt;/keydef>
  &lt;keydef keys="product" product="enterprise">
    &lt;topicmeta>
      &lt;keywords>
        &lt;keyword>Enterprise Widget&lt;/keyword>
      &lt;/keywords>
    &lt;/topicmeta>
  &lt;/keydef></codeblock></p>
        <p>Notice that the profiling of the names that was shown in <xref
            href="#eppo.dita.pathfinder-keys/fig.variable-content-using-profiling" format="dita"/>
          is now contained in the map, where it only has to occur once. </p>
        <p>Depending on which profiling conditions are active in <ph keyref="product"/>, you will
          see different values of the key displayed in author mode.</p>
      </section>
    </section>
    <section><title>Keys for Topics</title><p>Keys are a very general mechanism. The example above
        uses a key to insert a text string, but there are many more things that can be represented
        by keys. For example, you can assign a key to a topic. As always, keys are defined in maps,
        so the key definition is done using the keys attribute of the <codeph>topicref</codeph>
        element:</p><codeblock>&lt;topicref href="quick-heat.dita" keys="feature.quick-heat"/></codeblock><p>Once
        a key is assigned to a topic, you can use it to refer to that topic for different
          reasons:<ul id="ul_ubr_vwd_zp">
          <li>You can create a link to it using <codeph>&lt;xref
              keyref="feature.quick-heat"/></codeph>. This could allow you to change the target of
            the link by changing the topic pointed to by the key (for example, by profiling). </li>
          <li>You can use it in a map to create a reference to a topic by key: <codeph>&lt;topicref
              keyref="feature.quick-heat"</codeph>. This could allow you to change which topic is
            inserted in the map by the build by changing the topic pointed to by the key.</li>
          <li>You can use it to insert a content reference. In this case, the content reference uses
            the key to locate the topic to pull content from. It uses a <codeph>conkeyref</codeph>
            attribute: <codeph>&lt;procedure
              conkeyref="feature.quick-heat/preheat-procedure"/></codeph>. In this example,
              <codeph>feature.quick-heat</codeph> is the key, and <codeph>preheat-procedure</codeph>
            is the id of a procedure within the topic with that key. Using this mechanism, you could
            have different versions of the preheat procedure in different topics and control which
            one was inserted by changing the topic pointed to by the key.</li>
        </ul></p></section>
    <section>
      <title>Keys for Graphics</title>
      <p>You can assign a key to an image (using a map to point to the image file) and insert the
        image using the key. </p>
    </section>

  </body>
</topic>
